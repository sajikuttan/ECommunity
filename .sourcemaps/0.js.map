{"version":3,"sources":["../../src/pages/signup/signup.module.ts","../../src/pages/signup/signup.ts"],"names":[],"mappings":"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","file":"0.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { SignupPage } from './signup';\n\n@NgModule({\n  declarations: [\n    SignupPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(SignupPage),\n  ],\n})\nexport class SignupPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/signup/signup.module.ts","import { Component } from '@angular/core';\nimport {\n  Alert,\n  AlertController,\n  IonicPage,\n  Loading,\n  LoadingController,\n  NavController\n} from 'ionic-angular';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { AuthProvider } from '../../providers/auth/auth';\nimport { DatabaseProvider } from '../../providers/database/database';\nimport { HelloIonicPage } from '../hello-ionic/hello-ionic';\nimport { EmailValidator } from '../../validators/email';\nimport firebase from 'firebase/app';\nimport { Storage } from '@ionic/storage';\n\n@IonicPage()\n@Component({\n  selector: 'page-signup',\n  templateUrl: 'signup.html'\n})\nexport class SignupPage {\n  public signupForm: FormGroup;\n  constructor(\n    public navCtrl: NavController,\n    public loadingCtrl: LoadingController,\n    public alertCtrl: AlertController,\n    public authProvider: AuthProvider,\n    formBuilder: FormBuilder,\n    public storage:Storage,\n    public databaseProvider:DatabaseProvider\n  ) {\n    this.signupForm = formBuilder.group({\n      email: [\n        '',\n        Validators.compose([Validators.required, EmailValidator.isValid])\n      ],\n      password: [\n        '',\n        Validators.compose([Validators.required, Validators.minLength(6)])\n      ]\n    });\n  }\n\n  async signupUser(): Promise<void> {\n    var access_token;\n    var uid;\n    if (!this.signupForm.valid) {\n      console.log(\n        `Form is not valid yet, current value: ${this.signupForm.value}`\n      );\n    } else {\n      const loading: Loading = this.loadingCtrl.create();\n      loading.present();\n\n      const email = this.signupForm.value.email;\n      const password = this.signupForm.value.password;\n\n      try {\n        const signupUser: firebase.User = await this.authProvider.signupUser(\n          email,\n          password\n        );\n        await loading.dismiss();\n        signupUser.getToken().then(token => {\n          console.log(token);\n          access_token = token;\n          uid = signupUser.uid;\n          this.databaseProvider.saveAuthenticationToken(uid,access_token);\n          this.storage.set('access_token',token);\n        }) // save the token server-side and use it to push notifications to this device\n        .catch(error => console.error('Error getting token', error));\n        this.navCtrl.setRoot(HelloIonicPage);\n      } catch (error) {\n        await loading.dismiss();\n        const alert: Alert = this.alertCtrl.create({\n          message: error.message,\n          buttons: [{ text: 'Ok', role: 'cancel' }]\n        });\n        alert.present();\n      }\n    }\n  }\n  goBack(){\n    this.navCtrl.pop();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/signup/signup.ts"],"sourceRoot":""}